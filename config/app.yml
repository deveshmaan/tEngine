run_id: "dev-run"
persistence_path: "engine_state.sqlite"
strategy_tag: "intraday-buy"

data:
  index_symbol: "NIFTY"
  lot_step: 75
  tick_size: 0.05
  price_band_low: 10
  price_band_high: 99999.0
  expiry_ttl_minutes: 5
  weekly_expiry_weekday: 1 # 0=Monday â€¦ 6=Sunday; 1 == Tuesday for NIFTY weekly expiry
  subscription_expiry_preference: "current" # allowed: current | next | monthly
  holidays:
    - "2024-08-15"
    - "2024-10-02"
    - "2024-12-25"
  strike_steps:
    NIFTY: 50
    BANKNIFTY: 100

market_data:
  window_steps: 8 # +/- steps around ATM
  option_type: "BOTH" # CE | PE | BOTH
  stream_mode: "full_d30"
  depth_levels: 5 # render top 5 in UI to keep UI light
  max_tick_age_seconds: 2.0

risk:
  daily_pnl_stop: -1000 # max you are willing to lose in a day
  per_symbol_loss_stop: -1000
  max_open_lots: 2
  notional_premium_cap: 5000
  no_new_entries_after: "15:28:00"
  square_off_by: "15:28:00"
  max_order_rate: 5

broker:
  max_order_rate: 15
  rest_timeout: 3.0
  ws_heartbeat_interval: 3.0
  ws_backoff_seconds: [1, 2, 5, 10]
  oauth_refresh_margin: 60
  rate_limits:
    place:
      rate_per_sec: 5
      burst: 10
    modify:
      rate_per_sec: 3
      burst: 6
    cancel:
      rate_per_sec: 3
      burst: 6
    history:
      rate_per_sec: 2
      burst: 4

oms:
  resubmit_backoff: 0.5
  reconciliation_interval: 2.0
  max_inflight_orders: 2
  submit:
    default: "auto"
    max_spread_ticks: 2
    depth_threshold: 10

exit:
  stop_pct: 0.25
  target1_pct: 0.5
  partial_fraction: 0.5
  trail_lock_pct: 0.4
  trail_giveback_pct: 0.5
  min_trail_ticks: 3
  max_holding_minutes: 20

alerts:
  throttle_seconds: 30

telemetry:
  metrics_port_env: "METRICS_PORT"

replay:
  default_speed: 1.0

smoke_test:
  enabled: false # turn on for the day
  underlying: "NIFTY" # or "BANKNIFTY" later
  side: "CE" # start with CALL, you can test PE on another day
  hold_seconds: 60 # start with 60s, you can bump to 120 later
  lots: 1
  max_notional_rupees: 7000
