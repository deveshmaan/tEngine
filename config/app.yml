run_id: "dev-run"
persistence_path: "engine_state.sqlite"
strategy_tag: "intraday-buy"

data:
  index_symbol: "NIFTY"
  lot_step: 50
  tick_size: 0.05
  price_band_low: 10.0
  price_band_high: 99999.0
  expiry_ttl_minutes: 5
  weekly_expiry_weekday: 3
  subscription_expiry_preference: "current" # allowed: current | next | monthly
  holidays:
    - "2024-08-15"
    - "2024-10-02"
    - "2024-12-25"
  strike_steps:
    NIFTY: 50
    BANKNIFTY: 100
  weekly_expiry_weekday: 1  # Tuesday (NSE rule)

market_data:
  window_steps: 4 # +/- steps around ATM
  option_type: "BOTH" # CE | PE | BOTH
  stream_mode: "full_d30"
  depth_levels: 5  # render top 5 in UI to keep UI light

risk:
  daily_pnl_stop: -15000
  per_symbol_loss_stop: -5000
  max_open_lots: 20
  notional_premium_cap: 250000
  no_new_entries_after: "23:32:00"
  square_off_by: "23:32:00"

broker:
  max_order_rate: 15
  rest_timeout: 3.0
  ws_heartbeat_interval: 3.0
  ws_backoff_seconds: [1, 2, 5, 10]
  oauth_refresh_margin: 60
  rate_limits:
    place:
      rate_per_sec: 15
      burst: 30
    modify:
      rate_per_sec: 12
      burst: 24
    cancel:
      rate_per_sec: 12
      burst: 24
    history:
      rate_per_sec: 5
      burst: 10

oms:
  resubmit_backoff: 0.5
  reconciliation_interval: 2.0
  max_inflight_orders: 8
  submit:
    default: "auto"
    max_spread_ticks: 2
    depth_threshold: 50

alerts:
  throttle_seconds: 30

telemetry:
  metrics_port_env: "METRICS_PORT"

replay:
  default_speed: 1.0
